# Base Dockerfile

# Use Oracle Linux 7 as the base image
FROM python:3.10-buster

RUN apt-get -y update && apt-get install -y vim netcat bash make curl tini wget cmake unzip build-essential libsm6 libxext6 libxrender-dev libglib2.0-0 alien
# Install necessary dependencies
#RUN yum -y install oracle-release-el7 && \
#    yum-config-manager --enable ol7_oracle_instantclient && \
#    yum -y install oracle-instantclient-basic oracle-instantclient-devel python3 python3-pip wget unzip && \
#    rm -rf /var/cache/yum


# Download and install Oracle Instant Client for Oracle 12c
COPY instantclient-basic-linux.x64-12.2.0.1.0.zip /opt/

# Install Oracle Instant Client
RUN cd /opt/ && \
    unzip instantclient-basic-linux.x64-12.2.0.1.0.zip && \
    apt-get -y update && apt-get install -y libaio1 libaio-dev && \
    rm -f instantclient-basic-linux.x64-12.2.0.1.0.zip && \
    sh -c "echo /opt/instantclient_12_2 > /etc/ld.so.conf.d/oracle-instantclient.conf" && \
    ldconfig

# Set environment variables
ENV LD_LIBRARY_PATH=/opt/instantclient_12_2:$LD_LIBRARY_PATH
ENV PATH=/opt/instantclient_12_2:$PATH
